/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/mkvdemuxjs@1.0.1/mkvdemux.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var mkvdemuxjs=function(e){function t(){this.queue=[],this.peekHi=0,this.peekLo=0,this.pos=0,this.context=[],this.block=null,this.ex={}}function i(e,t,i,n){this.id=e,this.length=t,this.start=i,this.bodyStart=n,this.end=t>=0?n+t:1/0,this.ex={}}return t.prototype={push:function(e){this.queue.push(e)},peek:function(e){if(this.queue.length<=this.peekHi)return null;var t=this.queue[this.peekHi];if(0===this.peekLo&&t.byteLength>=e)return this.peekLo+=e,this.peekLo>=t.byteLength&&(this.peekHi++,this.peekLo=0),t;if(t.byteLength>=this.peekLo+e){var i=new Uint8Array(t).slice(this.peekLo,this.peekLo+e);return this.peekLo+=e,this.peekLo>=t.byteLength&&(this.peekHi++,this.peekLo=0),i.buffer}(i=new Uint8Array(e)).set(new Uint8Array(t).slice(this.peekLo));for(var n=t.byteLength-this.peekLo,r=e-n,s=this.peekHi+1;r;){if(s>=this.queue.length)return null;var h=new Uint8Array(this.queue[s++]);h.length>=r?h.length===r?(i.set(h,n),this.peekHi=s+1,this.peekLo=0,r=0):(i.set(h.slice(0,r),n),this.peekHi=s,this.peekLo=r,r=0):(i.set(h,n),r-=h.length,n+=h.length)}return i.buffer},commit:function(){for(;this.peekHi;)this.pos+=this.queue[0].byteLength,this.queue.shift(),this.peekHi--;if(this.peekLo){this.pos+=this.peekLo;var e=new Uint8Array(this.queue[0]).slice(this.peekLo);0===e.length?this.queue.shift():this.queue[0]=e.buffer,this.peekLo=0}for(;this.context.length&&this.context[this.context.length-1].end<=this.pos;)this.context.pop();this.context.length?this.block=this.context[this.context.length-1]:this.block=null},savePeek:function(){return{hi:this.peekHi,lo:this.peekLo}},restorePeek:function(e){this.peekHi=e.hi,this.peekLo=e.lo},peekVint:function(e){var t=this.savePeek(),i=this.peek(1);if(null===i)return null;i=new Uint8Array(i)[0];for(var n=1;!(128&i);)n++,i=i<<1&255;i&=127,i>>>=n-1,this.restorePeek(t);var r=this.peek(n);if(null===r)return null;r=new Uint8Array(r).slice(0,n),e||(r[0]=i);for(var s=0,h=0;h<r.length;h++)s*=256,s+=r[h];return s},readEBMLHeader:function(){var e,t=this.savePeek(),n=this.pos,r=this.peekVint(!0);if(null===r)return null;var s=this.savePeek(),h=this.peek(1);if(null===h)return this.restorePeek(t),null;if(191===(h=new Uint8Array(h)[0]))e=-1;else if(this.restorePeek(s),null===(e=this.peekVint()))return this.restorePeek(t),null;this.commit();var a=new i(r,e,n,this.pos);return e>=0&&(this.context.push(a),this.block=a),a},readEBMLBody:function(){if(0===this.block.length)return this.context.pop(),this.context.length?this.block=this.context[this.context.length-1]:this.block=null,null;var e=this.block.end-this.pos,t=this.peek(e);return null===t?null:(this.commit(),t)},readUInt:function(){var e=this.block.length,t=this.readEBMLBody();if(0===e)return 0;if(null===t)return null;switch(t=new DataView(t),e){case 1:return t.getUint8(0);case 2:return t.getUint16(0);case 4:return t.getUint32(0);default:var i=0;t=new Uint8Array(t.buffer);for(var n=0;n<e;n++)i*=256,i+=t[n];return i}},readFloat:function(){var e=this.block.length,t=this.readEBMLBody();return 0===e?0:null===t?null:(t=new DataView(t),4===e?t.getFloat32(0):8===e?t.getFloat64(0):0)},demux:function(){for(var e;;){if(this.context.length||this.readEBMLHeader(),!this.context.length)return null;switch((e=this.block).id){case 440786851:case 290298740:case 357149030:case 307544935:case 30114:case 236:case 191:return null===(i=this.readEBMLBody())?null:(e.ex.content=i,e);case 408125543:case 374648427:case 524531317:case 160:if(null===this.readEBMLHeader())return null;this.ex={};break;case 174:return this.readTrackEntry();case 231:var t=this.readUInt();if(null===t)return null;this.ex.clusterTimestamp=t;break;case 161:case 163:return this.decodeBlock();default:var i;if(null===(i=this.readEBMLBody()))return null;console.log("Unrecognized element "+e.id.toString(16)+" at "+e.start.toString(16)+" to "+e.end.toString(16)),console.log("Context:");for(var n=0;n<this.context.length;n++)console.log("  "+this.context[n].id.toString(16));return e.ex.content=i,e}}},readTrackEntry:function(){var e=this.block,t=e.end-this.pos,i=this.savePeek();if(null===this.peek(t))return null;this.restorePeek(i);for(var n={track:{}};this.block===e;){var r=this.readEBMLHeader();if(null===r)return null;switch(r.id){case 156:case 2274716:case 22203:case 25506:this.readEBMLBody();break;case 225:this.context.pop(),this.block=e;break;case 215:n.track.number=this.readUInt();break;case 29637:n.track.uid=this.readUInt();break;case 134:n.track.codec=this.readUInt();break;case 22186:n.track.codecDelay=this.readUInt()/1e9;break;case 131:var s="unknown";switch(n.track.codecType=this.readUInt()){case 1:s="video";break;case 2:s="audio"}n.track.type=s;break;case 159:n.track.channels=this.readUInt();break;case 181:n.track.sampleRate=this.readFloat();break;case 25188:n.track.bitDepth=this.readUInt();break;default:console.log("Unrecognized track entry component "+r.id.toString(16)),this.readEBMLBody()}}return n},decodeBlock:function(){var e=this.block.length,t=this.readEBMLBody();if(null===t)return null;t=new DataView(t);var i={},n=this.ex.clusterTimestamp;n||(n=0);var r=t.getUint8(0);128&r||console.log("ERROR: Track #s greater than 127 are not supported!"),r&=127;var s=(n+t.getInt16(1))/1e3;6&t.getUint8(3)&&console.log("ERROR: Lacing is not supported!");var h={data:new Uint8Array(t.buffer).slice(4,e).buffer,track:r,timestamp:s};return i.frames=[h],i}},e.MkvDemux=t,e}(mkvdemuxjs||{});"undefined"!=typeof module&&(module.exports=mkvdemuxjs);
//# sourceMappingURL=/sm/b0e0ad11dfee7912c81d415fe8c8ca3217eb34d219adfb46117af0075082e351.map